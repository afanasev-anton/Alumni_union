{% extends 'base.html.twig' %}

{% block title %}{{ post.title }}{% endblock %}

{% block body %}

<div class="container">
    <h1 class="mt-3 mb-5">{{ post.title }}</h1>
    <div class="row m-0 text-muted">
        <p class="mr-3">Created by <i class="fa fa-user"></i> {{ post.author }}</p>
        {{ include('pages/_post_tags.html.twig') }}
        <span class="ml-auto"><i class="fa fa-calendar"></i> {{ post.createdAt | date('j. F Y H:m')}} </span>
    </div>

    <p>{{ post.content }}</p>
</div>

{% if is_granted('IS_AUTHENTICATED_FULLY') %}
            {{ render(controller('App\\Controller\\IndexController::commentForm', {'id': post.id})) }}
        {% else %}
            <p>
                <a class="btn btn-success" href="{{ path('app_login', {'redirect_to': app.request.pathInfo}) }}">
                    <i class="fa fa-sign-in" aria-hidden="true"></i> Sign in
                </a>
                You need to be signed in to post a comment!
            </p>
{% endif %}

    <h3>
        <i class="fa fa-comments" aria-hidden="true"></i> {{ post.comments|length }}
    </h3>

    <div class="commentcolor">
    {% for comment in post.comments %}
        <div class="row post-comment">
            <a name="comment_{{ comment.id }}"></a>
            <h5 class="col-sm-4">
                <strong><i class="fa fa-user"></i> {{ comment.author }}</strong>
                <strong>{{ comment.createdAt| date('j. F Y H:m') }}</strong>
            </h5>
            <div class="col-sm-8">
                {{ comment.content }}
            </div>
        </div>
    {% else %}
        <div class="post-comment">
            <p>No comments.</p>
        </div>
    {% endfor %}
    </div>

<style>
.commentcolor div:nth-child(even) {
    background: #e0e0e0;
}

.post-comment {
    min-height: 10vh;
    padding: 1em;
}
</style>

{% endblock %}


